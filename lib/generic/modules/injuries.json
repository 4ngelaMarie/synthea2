{
  "name": "Injuries",
  "remarks": [
    "This module waits for an injury to occur then plays out that injury's typical ",
    "progress in a patient's medical record. Some injuries may be both fatal or ",
    "non-fatal.",

    "Related attributes: ",
    " 'injured'      - boolean - Indicates if an injury occured and triggers this module ",
    "                            to process that injury. ",
    " 'injury_type'  - string  - Indicates the type of injury. See supported types below. ",
    " 'fatal_injury' - boolean - Indicates if the injury is fatal (only applies to some ",
    "                            injuries, see below).",

    "Most of these statistics come from a 2007 report prepared by the CDC: ",
    "http://www.cdc.gov/nchs/data/misc/injury2007.pdf",

    "Additional sources are included throughout the module where supplemental information ",
    "was needed.",

    "Every injury pathway in this module assigns a care plan for the patient. This care ",
    "plan is referenced by the 'injury_careplan' attribute and is ended at the conclusion ",
    "of the injury."
  ],
  "states": {

    "Initial": {
      "type": "Initial",
      "direct_transition": "Wait_For_Injury"
    },

    "Wait_For_Injury": {
      "type": "Guard",
      "allow": {
        "condition_type": "Attribute",
        "attribute": "injured",
        "operator": "==",
        "value": true
      },
      "direct_transition": "Evaluate_Injury"
    },

    "Evaluate_Injury": {
      "type": "Simple",
      "remarks": [
        "Selects the type of injury to play out depending on the 'injury_type' attribute.",

        "Supported attribute values are: ",
        "1. 'spinal'       - injuries to the spinal cord or fractures of the spine ",
        "2. 'gunshot'      - gunshot wounds ",
        "3. 'concussion'   - common concussion from accidents, falls, and sports ",
        "4. 'whiplash'     - common injury in automobile accidents, falls, and sports ",
        "5. 'broken_bone'  - randomly selects between arms, legs, ribs, and collarbone ",
        "6. 'burn'         - 1st, 2nd, or 3rd degree burns ",
        "7. 'cut'          - A contusion or laceration, severity is randomized ",
        "8. 'sprain'       - A sprained ankle ",
        "9. 'ligament'     - A torn ligament (knee, shoulder) ",

        "The following injuries can also be fatal: ",
        "'spinal', 'gunshot', 'burn'"
      ],
      "conditional_transition": [
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "injury_type",
            "operator": "==",
            "value": "spinal"
          },
          "transition": "Spinal_Injury"
        },
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "injury_type",
            "operator": "==",
            "value": "gunshot"
          },
          "transition": "Gunshot_Injury"
        },
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "injury_type",
            "operator": "==",
            "value": "concussion"
          },
          "transition": "Concussion_Injury"
        },
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "injury_type",
            "operator": "==",
            "value": "whiplash"
          },
          "transition": "Whiplash_Injury"
        },
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "injury_type",
            "operator": "==",
            "value": "broken_bone"
          },
          "transition": "Broken_Bone_Injury"
        },
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "injury_type",
            "operator": "==",
            "value": "burn"
          },
          "transition": "Burn_Injury"
        },
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "injury_type",
            "operator": "==",
            "value": "cut"
          },
          "transition": "Cut_Injury"
        },
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "injury_type",
            "operator": "==",
            "value": "sprain"
          },
          "transition": "Sprain_Injury"
        },
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "injury_type",
            "operator": "==",
            "value": "ligament"
          },
          "transition": "Ligament_Injury"
        }
      ]
    },

    "Spinal_Injury": {
      "type": "Simple",
      "remarks": [
        "======================================================================",
        " SPINAL INJURY                                                        ",
        "======================================================================",

        "Further supported by the following incidence statistics (from 2010): ",
        "http://www.boneandjointburden.org/2014-report/iiia12/traumatic-spine-fractures ",

        "16 - 25% of spinal fractures result in neurological damage. This aligns with ",
        "The incidence of spinal cord injury folowing a spinal fracture. For simplicity ",
        "All spinal fractures with spinal cord damage also result in neurological damage."
      ],
      "direct_transition": "ED_Visit_For_Spinal_Injury"
    },

    "ED_Visit_For_Spinal_Injury": {
      "type": "Encounter",
      "encounter_class": "emergency",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "50849002",
          "display": "Emergency room admission"
        }
      ],
      "distributed_transition": [
        {
          "distribution": 0.25,
          "transition": "Spinal_Cord_Damage"
        },
        {
          "distribution": 0.75,
          "transition": "No_Spinal_Cord_Damage"
        }
      ]
    },

    "Spinal_Cord_Damage": {
      "type": "ConditionOnset",
      "target_encounter": "ED_Visit_For_Spinal_Injury",
      "assign_to_attribute": "spinal_injury",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "1734006",
          "display": "Fracture of the vertebral column with spinal cord injury"
        }
      ],
      "distributed_transition": [
        {
          "distribution": 0.49,
          "remarks": [
            "Nearly half of all patients die from traumatic spinal cord injury. ",
            "Source: https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3831332/"
          ],
          "transition": "Death"
        },
        {
          "distribution": 0.51,
          "transition": "Neurological_Damage"
        }
      ]
    },

    "Neurological_Damage": {
      "type": "ConditionOnset",
      "target_encounter": "ED_Visit_For_Spinal_Injury",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "698754002",
          "display": "Chronic paralysis due to lesion of spinal cord"
        }
      ],
      "direct_transition": "Spinal_Surgery"
    },

    "No_Spinal_Cord_Damage": {
      "type": "ConditionOnset",
      "target_encounter": "ED_Visit_For_Spinal_Injury",
      "assign_to_attribute": "spinal_injury",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "15724005",
          "display": "Fracture of vertebral column without spinal cord injury"
        }
      ],
      "direct_transition": "Spinal_Injury_Treatment_Encounter"
    },

    "Spinal_Surgery": {
      "type": "Procedure",
      "target_encounter": "ED_Visit_For_Spinal_Injury",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "305425002",
          "display": "Admission to neurosurgical department"
        }
      ],
      "direct_transition": "Delay_After_Spinal_Surgery"
    },

    "Delay_After_Spinal_Surgery": {
      "type": "Delay",
      "range": {
        "low": 1,
        "high": 3,
        "unit": "days"
      },
      "direct_transition": "Spinal_Injury_Treatment_Encounter"
    },

    "Spinal_Injury_Treatment_Encounter": {
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "185347001",
          "display": "Encounter for problem"
        }
      ],
      "direct_transition": "Spinal_Injury_CarePlan"
    },

    "Spinal_Injury_CarePlan": {
      "type": "CarePlanStart",
      "target_encounter": "Spinal_Injury_Treatment_Encounter",
      "assign_to_attribute": "injury_careplan",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "75162002",
          "display": "Spinal cord injury rehabilitation"
        }
      ],
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": "231181000000100",
          "display": "Delivery of rehabilitation for spinal cord injury"
        },
        {
          "system": "SNOMED-CT",
          "code": "77476009",
          "display": "Application of back brace"
        }
      ],
      "direct_transition": "Spinal_Treatment_Period"
    },

    "Spinal_Treatment_Period": {
      "type": "Delay",
      "range": {
        "low": 1,
        "high": 3,
        "unit": "months"
      },
      "direct_transition": "Spinal_Injury_Followup"
    },

    "Spinal_Injury_Followup": {
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "185349003",
          "display": "Encounter for 'check-up'"
        }
      ],
      "direct_transition": "End_Spinal_Injury"
    },

    "End_Spinal_Injury": {
      "type": "ConditionEnd",
      "remarks": [
        "This only ends the initial, acute spinal injury. If the patient had spinal ",
        "cord damage and survived, his/her chronic paralysis will persist for life."
      ],
      "referenced_by_attribute": "spinal_injury",
      "direct_transition": "Conclude_Injury"
    },

    "Gunshot_Injury": {
      "type": "Simple",
      "remarks": [
        "======================================================================",
        " GUNSHOT INJURY                                                       ",
        "======================================================================",

        "Further supported by the following statistics (2010): ",
        "http://smartgunlaws.org/gun-deaths-and-injuries-statistics/",

        "Gunshot deaths:                  31,076  => 29.8%",
        "Non-fatal hospital discharges:   73,505  => 70.2%",
        "Total gunshot injuries:         104,581"
      ],
      "direct_transition": "ED_Visit_For_Gunshot_Injury"
    },

    "ED_Visit_For_Gunshot_Injury": {
      "type": "Encounter",
      "encounter_class": "emergency",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "50849002",
          "display": "Emergency room admission"
        }
      ],
      "direct_transition": "Gunshot_Wound"
    },

    "Gunshot_Wound": {
      "type": "ConditionOnset",
      "target_encounter": "ED_Visit_For_Gunshot_Injury",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "262574004",
          "display": "Bullet wound"
        }
      ],
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "fatal_injury",
            "operator": "is nil"
          },
<<<<<<< 89281d8b5c0ddea0d822614bbbaaad05cafda3fb
          {
            "distribution" : 0.984,
            "transition": "No_Injury"
          }
        ]
      }]
    },


    "Road_Injury_Minor" : {
      "type" : "ConditionOnset",
      "target_encounter" : "RI_Minor_Encounter",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "39848009",
        "display" : "Whiplash injury to neck"
      }],
      "direct_transition" : "RI_Minor_Encounter"
    },

    "RI_Minor_Encounter" : {
      "type" : "Encounter",
      "encounter_class" : "emergency",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "50849002",
        "display" : "Emergency Room Admission"
      }],
      "direct_transition" : "Loop_back_to_no_injury"
    },

    "Road_Injury_Major" : {
      "type" : "ConditionOnset",
      "target_encounter" : "RI_Major_Encounter",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "125606003",
        "display" : "Fracture of cervical spine"
      }],
      "direct_transition" : "RI_Major_Encounter"
    },

    "RI_Major_Encounter" : {
      "type" : "Encounter",
      "encounter_class" : "emergency",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "50849002",
        "display" : "Emergency Room Admission"
      }],
      "conditional_transition" : 
        [
          {
            "condition": {
              "condition_type" : "Or",
              "conditions" : [
                {
                  "condition_type" : "Age",
                  "operator" : "<",
                  "quantity" : 14,
                  "unit" : "years"
                },
                {
                  "condition_type" : "Date",
                  "operator" : "<",
                  "year" : 1990
                },
                {
                  "condition_type" : "Attribute",
                  "attribute" : "Opioid Prescription",
                  "operator" : "is not nil"
                }
              ]
=======
          "remarks": [
            "Default probabilities if 'fatal_injury' attribute is not used"
          ],
          "distributions": [
            {
              "distribution": 0.298,
              "transition": "Death"
>>>>>>> Spinal injuries and gunshot wounds
            },
            {
              "distribution": 0.702,
              "transition": "Gunshot_Injury_Treatment"
            }
          ]
        },
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "fatal_injury",
            "operator": "==",
            "value": true
          },
          "transition": "Death"
        },
        {
          "remarks": [
            "Fallback transition"
          ],
          "transition": "Gunshot_Injury_Treatment"
        }
      ]
    },

<<<<<<< 89281d8b5c0ddea0d822614bbbaaad05cafda3fb
    "RI_Major_Medication_Nonopioid" : {
      "type" : "MedicationOrder",
      "target_encounter" : "RI_Major_Encounter",
      "codes" : [{
        "system" : "RxNorm",
        "code" : "646457",
        "display" : "Acetaminophen 650 MG [Tylenol]"
      }],
      "reason" : "Road_Injury_Major",
      "direct_transition" : "RI_Major_Medication_Nonopioid_Taken"
    },

    "RI_Major_Medication_Nonopioid_Taken" : {
      "type" : "Delay",
      "range" : {
        "low" : 8,
        "high" : 12,
        "unit" : "weeks"
      },
      "direct_transition" : "RI_Major_Medication_Nonopioid_End"
    },

    "RI_Major_Medication_Nonopioid_End" : {
      "type" : "MedicationEnd",
      "medication_order" : "RI_Major_Medication_Nonopioid",
      "direct_transition" : "Loop_back_to_no_injury"
    },

    "RI_Major_Medication_Opioid" : {
      "type" : "MedicationOrder",
      "target_encounter" : "RI_Major_Encounter",
      "codes" : [{
        "system" : "RxNorm",
        "code" : "1310197",
        "display" : "Acetaminophen 300 MG / HYDROcodone Bitartrate 5 MG [Vicodin]"
      }],
      "reason" : "Road_Injury_Major",
      "assign_to_attribute" : "Opioid Prescription",
      "direct_transition" : "Loop_back_to_no_injury"
    },

    "Road_Injury_Severe" : {
      "type" : "Simple",
      "direct_transition" : "Death"
    },


    "Falling_Injury_Minor" : {
      "type" : "ConditionOnset",
      "target_encounter" : "FI_Minor_Encounter",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "44465007",
        "display" : "Sprain of ankle"
      }],
      "direct_transition" : "FI_Minor_Encounter"
    },

    "FI_Minor_Encounter" : {
      "type" : "Encounter",
      "encounter_class" : "emergency",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "50849002",
        "display" : "Emergency Room Admission"
      }],
      "direct_transition" : "Loop_back_to_no_injury"
    },

    "Falling_Injury_Major" : {
      "type" : "ConditionOnset",
      "target_encounter" : "FI_Major_Encounter",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "77493009",
        "display" : "Fracture of pelvis"
      }],
      "direct_transition" : "FI_Major_Encounter"
    },

    "FI_Major_Encounter" : {
      "type" : "Encounter",
      "encounter_class" : "emergency",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "50849002",
        "display" : "Emergency Room Admission"
      }],
       "conditional_transition" : [
                {
                    "condition": {
                      "condition_type" : "Or",
                      "conditions" : [
                        {
                          "condition_type" : "Age",
                          "operator" : "<",
                          "quantity" : 14,
                          "unit" : "years"
                        },
                        {
                          "condition_type" : "Date",
                          "operator" : "<",
                          "year" : 1990
                        },
                        {
                          "condition_type" : "Attribute",
                          "attribute" : "Opioid Prescription",
                          "operator" : "is not nil"
                        }
                      ]
                    },
                    "transition": "FI_Major_Medication_Nonopioid"
                },
                {
                    "transition": "FI_Major_Medication_Opioid"
                }
            ]
    },

    "FI_Major_Medication_Opioid" : {
      "type" : "MedicationOrder",
      "target_encounter" : "FI_Major_Encounter",
      "codes" : [{
        "system" : "RxNorm",
        "code" : "1310197",
        "display" : "Acetaminophen 300 MG / HYDROcodone Bitartrate 5 MG [Vicodin]"
      }],
      "reason" : "Falling_Injury_Major",
      "assign_to_attribute" : "Opioid Prescription",
      "direct_transition" : "Loop_back_to_no_injury"
    },


    "FI_Major_Medication_Nonopioid" : {
      "type" : "MedicationOrder",
      "target_encounter" : "FI_Major_Encounter",
      "codes" : [{
        "system" : "RxNorm",
        "code" : "646457",
        "display" : "Acetaminophen 650 MG [Tylenol]"
      }],
      "reason" : "Falling_Injury_Major",
      "direct_transition" : "FI_Major_Medication_Nonopioid_Taken"
    },

    "FI_Major_Medication_Nonopioid_Taken" : {
      "type" : "Delay",
      "range" : {
        "low" : 4,
        "high" : 8,
        "unit" : "weeks"
      },
      "direct_transition" : "FI_Major_Medication_Nonopioid_End"
    },

    "FI_Major_Medication_Nonopioid_End" : {
      "type" : "MedicationEnd",
      "medication_order" : "FI_Major_Medication_Nonopioid",
      "direct_transition" : "Loop_back_to_no_injury"
    },

    "Blunt_Object_Injury_Minor" : {
      "type" : "ConditionOnset",
      "target_encounter" : "BOI_Minor_Encounter",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "62106007",
        "display" : "Concussion with no loss of consciousness"
      }],
      "direct_transition" : "BOI_Minor_Encounter"
    },

    "BOI_Minor_Encounter" : {
      "type" : "Encounter",
      "encounter_class" : "emergency",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "50849002",
        "display" : "Emergency Room Admission"
      }],
      "direct_transition" : "Loop_back_to_no_injury"
    },

    "Blunt_Object_Injury_Major" : {
      "type" : "ConditionOnset",
      "target_encounter" : "BOI_Major_Encounter",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "419945001",
        "display" : "Traumatic injury due to event"
      }],
      "direct_transition" : "BOI_Major_Encounter"
    },

    "BOI_Major_Encounter" : {
      "type" : "Encounter",
      "encounter_class" : "emergency",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "50849002",
        "display" : "Emergency Room Admission"
      }],
      "direct_transition" : "BOI_Major_Medication"
    },

    "BOI_Major_Medication" : {
      "type" : "MedicationOrder",
      "target_encounter" : "BOI_Major_Encounter",
      "codes" : [{
        "system" : "RxNorm",
        "code" : "142442",
        "display" : "Naproxen sodium"
      }],
      "reason" : "Blunt_Object_Injury_Major",
      "direct_transition" : "BOI_Major_Medication_Taken"
    },

    "BOI_Major_Medication_Taken" : {
      "type" : "Delay",
      "range" : {
        "low" : 2,
        "high" : 6,
        "unit" : "weeks"
      },
      "direct_transition" : "BOI_Major_Medication_End"
    },

    "BOI_Major_Medication_End" : {
      "type" : "MedicationEnd",
      "medication_order" : "BOI_Major_Medication",
      "direct_transition" : "Loop_back_to_no_injury"
    },

    "Sharp_Object_Injury_Minor" : {
      "type" : "ConditionOnset",
      "target_encounter" : "SOI_Minor_Encounter",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "284549007",
        "display" : "Laceration of hand"
      }],
      "direct_transition" : "SOI_Minor_Encounter"
    },

    "SOI_Minor_Encounter" : {
      "type" : "Encounter",
      "encounter_class" : "emergency",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "50849002",
        "display" : "Emergency Room Admission"
      }],
      "direct_transition" : "Loop_back_to_no_injury"
    },

    "Sharp_Object_Injury_Major" : {
      "type" : "ConditionOnset",
      "target_encounter" : "SOI_Major_Encounter",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "446455004",
        "display" : "Deep laceration of thigh"
      }],
      "direct_transition" : "SOI_Major_Encounter"
    },

    "SOI_Major_Encounter" : {
      "type" : "Encounter",
      "encounter_class" : "emergency",
      "codes" : [{
        "system" : "SNOMED-CT",
        "code" : "50849002",
        "display" : "Emergency Room Admission"
      }],
      "direct_transition" : "SOI_Major_Medication"
    },

    "SOI_Major_Medication" : {
      "type" : "MedicationOrder",
      "target_encounter" : "SOI_Major_Encounter",
      "codes" : [{
        "system" : "RxNorm",
        "code" : "572514",
        "display" : "Cephalexin 250 MG [Keflex]"
      }],
      "reason" : "Sharp_Object_Injury_Major",
      "direct_transition" : "SOI_Major_Medication_Taken"
    },

    "SOI_Major_Medication_Taken" : {
      "type" : "Delay",
      "range" : {
        "low" : 7,
        "high" : 14,
        "unit" : "days"
=======
    "Gunshot_Injury_Treatment": {
      "type": "Simple",
      "remarks": [
        "This is an aribitrary distribution between wounds requiring surgery ",
        "and wounds that do not (just grazed by the bullet). Assuming that most ",
        "gunshot wounds will require surgery."
      ],
      "distributed_transition": [
        {
          "distribution": 0.85,
          "transition": "Gunshot_Wound_Surgery"
        },
        {
          "distribution": 0.15,
          "transition": "Gunshot_Wound_CarePlan"
        }
      ]
    },

    "Gunshot_Wound_Surgery": {
      "type": "Procedure",
      "target_encounter": "ED_Visit_For_Gunshot_Injury",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "305433001",
          "display": "Admission to trauma surgery department"
        }
      ],
      "direct_transition": "Gunshot_Wound_CarePlan"
    },

    "Gunshot_Wound_CarePlan": {
      "type": "CarePlanStart",
      "assign_to_attribute": "injury_careplan",
      "target_encounter": "ED_Visit_For_Gunshot_Injury",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "225358003",
          "display": "Wound care"
        }
      ],
      "direct_transition": "Gunshot_Wound_Healing_Period"
    },

    "Gunshot_Wound_Healing_Period": {
      "type": "Delay",
      "range": {
        "low": 1,
        "high": 4,
        "unit": "months"
>>>>>>> Spinal injuries and gunshot wounds
      },
      "direct_transition": "Gunshot_Injury_Followup"
    },

    "Gunshot_Injury_Followup": {
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "185349003",
          "display": "Encounter for 'check-up'"
        }
      ],
      "direct_transition": "Gunshot_Wound_Ends"
    },

    "Gunshot_Wound_Ends": {
      "type": "ConditionEnd",
      "condition_onset": "Gunshot_Wound",
      "direct_transition": "Conclude_Injury"
    },

    "Concussion_Injury": {
      "type": "Simple",
      "remarks": [
        "======================================================================",
        " CONCUSSION                                                           ",
        "======================================================================",

        "Further supported by the following CDC reports: ",
        "http://www.cdc.gov/traumaticbraininjury/data/rates.html",
        "https://www.cdc.gov/traumaticbraininjury/pdf/tbi_report_to_congress_epi_and_rehab-a.pdf",
        "http://www.cdc.gov/traumaticbraininjury/pdf/bluebook_factsheet-a.pdf"
      ],
      "direct_transition": "ED_Visit_For_Concussion"
    },

    "ED_Visit_For_Concussion": {
      "type": "Encounter",
      "encounter_class": "emergency",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "50849002",
          "display": "Emergency room admission"
        }
      ],
      "distributed_transition": [
        {
          "distribution": 0.75,
          "transition": "Mild_Concussion"
        },
        {
          "distribution": 0.2,
          "transition": "Moderate_Concussion"
        },
        {
          "distribution": 0.05,
          "transition": "Severe_Concussion"
        }
      ]
    },

    "Mild_Concussion": {
      "type": "ConditionOnset",
      "target_encounter": "ED_Visit_For_Concussion",
      "assign_to_attribute": "concussion_injury",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "62106007",
          "display": "Concussion with no loss of consciousness"
        }
      ],
      "direct_transition": "Concussion_CarePlan"
    },

    "Moderate_Concussion": {
      "type": "ConditionOnset",
      "target_encounter": "ED_Visit_For_Concussion",
      "assign_to_attribute": "concussion_injury",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "62564004",
          "display": "Concussion with loss of consciousness"
        }
      ],
      "direct_transition": "Concussion_CarePlan"
    },

    "Severe_Concussion": {
      "type": "ConditionOnset",
      "target_encounter": "ED_Visit_For_Concussion",
      "assign_to_attribute": "concussion_injury",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "110030002",
          "display": "Concussion injury of brain"
        }
      ],
      "remarks": [
        "Distributions based on this article: ",
        "http://www.cdc.gov/traumaticbraininjury/severe.html"
      ],
      "distributed_transition": [
        {
          "distribution": 0.57,
          "transition": "Concussion_CarePlan"
        },
        {
          "distribution": 0.33,
          "transition": "Permanent_Brain_Damage"
        },
        {
          "distribution": 0.1,
          "transition": "Death"
        }
      ]
    },

    "Permanent_Brain_Damage": {
      "type": "ConditionOnset",
      "target_encounter": "ED_Visit_For_Concussion",
      "remarks": [
        "There will never be a ConditionEnd for this state - this brain damage is permanent."
      ],
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "275272006",
          "display": "Brain damage - traumatic"
        }
      ],
      "direct_transition": "Concussion_CarePlan"
    },

    "Concussion_CarePlan": {
      "type": "CarePlanStart",
      "target_encounter": "ED_Visit_For_Concussion",
      "assign_to_attribute": "injury_careplan",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "47387005",
          "display": "Head injury rehabilitation"
        }
      ],
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": "183051005",
          "display": "Recommendation to rest"
        },
        {
          "system": "SNOMED-CT",
          "code": "226138001",
          "display": "Alcohol-free diet"
        }
      ],
      "direct_transition": "Concussion_Recovery_Period"
    },

    "Concussion_Recovery_Period": {
      "type": "Delay",
      "range": {
        "low": 1,
        "high": 3,
        "unit": "months"
      },
      "direct_transition": "Concussion_Injury_Followup"
    },

    "Concussion_Injury_Followup": {
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "Encounter for 'check-up'",
          "display": "185349003"
        }
      ],
      "direct_transition": "End_Concussion_Injury"
    },

    "End_Concussion_Injury": {
      "type": "ConditionEnd",
      "referenced_by_attribute": "concussion_injury",
      "direct_transition": "Conclude_Injury"
    },

    "Whiplash_Injury": {
      "type": "Simple",
      "remarks": [
        "======================================================================",
        " WHIPLASH                                                             ",
        "======================================================================",

        "Further supported by the following sources: ",
        "http://www.srisd.com/consumer_site/epidemiology.htm",
        "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2564031/",

        "Many whiplash injuries do not present themselves immediately and are not ",
        "treated by an emergency department. If they're ever addressed at all they ",
        "are treated in an ambulatory setting by a PCP. For simplicity however, all ",
        "of the whiplash injuries seen in this module are treated by an ED department."
      ],
      "direct_transition": "ED_Visit_For_Whiplash"
    },

    "ED_Visit_For_Whiplash": {
      "type": "Encounter",
      "encounter_class": "emergency",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "50849002",
          "display": "Emergency room admission"
        }
      ],
      "direct_transition": "Whiplash"
    },

    "Whiplash": {
      "type": "ConditionOnset",
      "target_encounter": "ED_Visit_For_Whiplash",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "39848009",
          "display": "Whiplash injury to neck"
        }
      ],
      "direct_transition": "Whiplash_CarePlan"
    },

    "Whiplash_CarePlan": {
      "type": "CarePlanStart",
      "assign_to_attribute": "injury_careplan",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "872781000000100",
          "display": "Musculoskeletal care"
        }
      ],
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": "266694003",
          "display": "Heat therapy"
        },
        {
          "system": "SNOMED-CT",
          "code": "183051005",
          "display": "Recommendation to rest"
        }
      ],
      "direct_transition": "Whiplash_Recovery_Period"
    },

    "Whiplash_Recovery_Period": {
      "type": "Delay",
      "range": {
        "low": 3,
        "high": 6,
        "unit": "weeks"
      },
      "direct_transition": "End_Whiplash_Injury"
    },

    "End_Whiplash_Injury": {
      "type": "ConditionEnd",
      "condition_onset": "Whiplash",
      "direct_transition": "Conclude_Injury"
    },

    "Broken_Bone_Injury": {
      "remarks": [
        "======================================================================",
        " BROKEN BONE                                                          ",
        "======================================================================"
      ],
      "direct_transition": "Terminal"
    },

    "Burn_Injury": {
      "remarks": [
        "======================================================================",
        " BURN                                                                 ",
        "======================================================================"
      ],
      "direct_transition": "Terminal"
    },

    "Cut_Injury": {
      "remarks": [
        "======================================================================",
        " CUT                                                                  ",
        "======================================================================"
      ],
      "direct_transition": "Terminal"
    },

    "Sprain_Injury": {
      "remarks": [
        "======================================================================",
        " SPRAIN                                                               ",
        "======================================================================"
      ],
      "direct_transition": "Terminal"
    },

    "Ligament_Injury": {
      "remarks": [
        "======================================================================",
        " LIGAMENT                                                             ",
        "======================================================================"
      ],
      "direct_transition": "Terminal"
    },

    "Conclude_Injury": {
      "type": "Simple",
      "remarks": [
        "======================================================================",
        " INJURY CONCLUSION                                                    ",
        "======================================================================",

        "NOTE: This section is not resposible for ending conditions, only resetting ",
        "attributes and ending care plans. This allows chronic injuries to continue ",
        "while short-term injuries should be ended earlier in this module."
      ],
      "direct_transition": "Unset_Injury_Attribute"
    },

    "Unset_Injury_Attribute": {
      "type": "SetAttribute",
      "attribute": "injured",
      "direct_transition": "Unset_Injury_Type_Attribute"
    },

    "Unset_Injury_Type_Attribute": {
      "type": "SetAttribute",
      "attribute": "injury_type",
      "direct_transition": "End_Injury_CarePlan"
    },

    "End_Injury_CarePlan": {
      "type": "CarePlanEnd",
      "referenced_by_attribute": "injury_careplan",
      "direct_transition": "Wait_For_Injury"
    },

    "Death": {
      "type": "Death",
      "direct_transition": "Terminal"
    },

    "Terminal": {
      "type": "Terminal"
    }
  }
}
